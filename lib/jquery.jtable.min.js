(function($){var h;$(window).on('beforeunload',function(){h=true});$(window).on('unload',function(){h=false});$.widget("hik.jtable",{options:{actions:{},fields:{},animationsEnabled:true,defaultDateFormat:'yy-mm-dd',dialogShowEffect:'fade',dialogHideEffect:'fade',showCloseButton:false,loadingAnimationDelay:500,saveUserPreferences:true,ajaxSettings:{type:'POST',dataType:'json'},toolbar:{hoverAnimation:true,hoverAnimationDuration:60,hoverAnimationEasing:undefined,items:[]},closeRequested:function(a,b){},formCreated:function(a,b){},formSubmitting:function(a,b){},formClosed:function(a,b){},loadingRecords:function(a,b){},recordsLoaded:function(a,b){},rowInserted:function(a,b){},rowsRemoved:function(a,b){},messages:{serverCommunicationError:'An error occured while communicating to the server.',loadingMessage:'Loading records...',noDataAvailable:'No data available!',areYouSure:'Are you sure?',save:'Save',saving:'Saving',cancel:'Cancel',error:'Error',close:'Close',cannotLoadOptionsFor:'Can not load options for field {0}'}},_$mainContainer:null,_$titleDiv:null,_$toolbarDiv:null,_$table:null,_$tableBody:null,_$tableRows:null,_$busyDiv:null,_$busyMessageDiv:null,_$errorDialogDiv:null,_columnList:null,_fieldList:null,_keyField:null,_firstDataColumnOffset:0,_lastPostData:null,_cache:null,_create:function(){this._normalizeFieldsOptions();this._initializeFields();this._createFieldAndColumnList();this._createMainContainer();this._createTableTitle();this._createToolBar();this._createTable();this._createBusyPanel();this._createErrorDialogDiv();this._addNoDataRow();this._cookieKeyPrefix=this._generateCookieKeyPrefix()},_normalizeFieldsOptions:function(){var c=this;$.each(c.options.fields,function(a,b){c._normalizeFieldOptions(a,b)})},_normalizeFieldOptions:function(a,b){if(b.listClass==undefined){b.listClass=''}if(b.inputClass==undefined){b.inputClass=''}if(b.dependsOn&&$.type(b.dependsOn)==='string'){var c=b.dependsOn.split(',');b.dependsOn=[];for(var i=0;i<c.length;i++){b.dependsOn.push($.trim(c[i]))}}},_initializeFields:function(){this._lastPostData={};this._$tableRows=[];this._columnList=[];this._fieldList=[];this._cache=[]},_createFieldAndColumnList:function(){var c=this;$.each(c.options.fields,function(a,b){c._fieldList.push(a);if(b.key==true){c._keyField=a}if(b.list!=false&&b.type!='hidden'){c._columnList.push(a)}})},_createMainContainer:function(){this._$mainContainer=$('<div />').addClass('jtable-main-container').appendTo(this.element)},_createTableTitle:function(){var a=this;if(!a.options.title){return}var b=$('<div />').addClass('jtable-title').appendTo(a._$mainContainer);$('<div />').addClass('jtable-title-text').appendTo(b).append(a.options.title);if(a.options.showCloseButton){var c=$('<span />').html(a.options.messages.close);$('<button></button>').addClass('jtable-command-button jtable-close-button').attr('title',a.options.messages.close).append(c).appendTo(b).click(function(e){e.preventDefault();e.stopPropagation();a._onCloseRequested()})}a._$titleDiv=b},_createTable:function(){this._$table=$('<table></table>').addClass('jtable').appendTo(this._$mainContainer);if(this.options.tableId){this._$table.attr('id',this.options.tableId)}this._createTableHead();this._createTableBody()},_createTableHead:function(){var a=$('<thead></thead>').appendTo(this._$table);this._addRowToTableHead(a)},_addRowToTableHead:function(a){var b=$('<tr></tr>').appendTo(a);this._addColumnsToHeaderRow(b)},_addColumnsToHeaderRow:function(a){for(var i=0;i<this._columnList.length;i++){var b=this._columnList[i];var c=this._createHeaderCellForField(b,this.options.fields[b]);c.appendTo(a)}},_createHeaderCellForField:function(a,b){b.width=b.width||'10%';var c=$('<span />').addClass('jtable-column-header-text').html(b.title);var d=$('<div />').addClass('jtable-column-header-container').append(c);var e=$('<th></th>').addClass('jtable-column-header').addClass(b.listClass).css('width',b.width).data('fieldName',a).append(d);return e},_createEmptyCommandHeader:function(){var a=$('<th></th>').addClass('jtable-command-column-header').css('width','1%');return a},_createTableBody:function(){this._$tableBody=$('<tbody></tbody>').appendTo(this._$table)},_createBusyPanel:function(){this._$busyMessageDiv=$('<div />').addClass('jtable-busy-message').prependTo(this._$mainContainer);this._$busyDiv=$('<div />').addClass('jtable-busy-panel-background').prependTo(this._$mainContainer);this._hideBusy()},_createErrorDialogDiv:function(){var a=this;a._$errorDialogDiv=$('<div class="modal fade" style="z-index: 999999;">'+'<div class="modal-dialog"><div class="modal-content"><div class="modal-header">'+'<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>'+'<h3>'+a.options.messages.error+'</h3>'+'</div>'+'<div class="modal-body alert"></div>'+'<div class="modal-footer">'+'<a href="#" class="btn" data-dismiss="modal" aria-hidden="true">'+a.options.messages.close+'</a></div>'+'</div></div></div>').appendTo(a._$mainContainer);a._$errorDialogDiv.modal({show:false})},load:function(a,b){this._lastPostData=a;this._reloadTable(b)},reload:function(a){this._reloadTable(a)},getRowByKey:function(a){for(var i=0;i<this._$tableRows.length;i++){if(a==this._getKeyValueOfRecord(this._$tableRows[i].data('record'))){return this._$tableRows[i]}}return null},destroy:function(){this.element.empty();$.Widget.prototype.destroy.call(this)},_setOption:function(a,b){},_reloadTable:function(b){var c=this;c._showBusy(c.options.messages.loadingMessage,c.options.loadingAnimationDelay);var d=c._createRecordLoadUrl();c._onLoadingRecords();c._ajax({url:d,data:c._lastPostData,success:function(a){c._hideBusy();if(a.Result!='OK'){c._showError(a.Message);return}c._removeAllRows('reloading');c._addRecordsToTable(a.Records);c._onRecordsLoaded(a);if(b){b()}},error:function(){c._hideBusy();c._showError(c.options.messages.serverCommunicationError)}})},_createRecordLoadUrl:function(){return this.options.actions.listAction},_createRowFromRecord:function(a){var b=$('<tr></tr>').addClass('jtable-data-row').attr('data-record-key',this._getKeyValueOfRecord(a)).data('record',a);this._addCellsToRowUsingRecord(b);return b},_addCellsToRowUsingRecord:function(a){var b=a.data('record');for(var i=0;i<this._columnList.length;i++){this._createCellForRecordField(b,this._columnList[i]).appendTo(a)}},_createCellForRecordField:function(a,b){return $('<td></td>').addClass(this.options.fields[b].listClass).append((this._getDisplayTextForRecordField(a,b)))},_addRecordsToTable:function(c){var d=this;$.each(c,function(a,b){d._addRow(d._createRowFromRecord(b))});d._refreshRowStyles()},_addRowToTable:function(a,b,c,d){var e={index:this._normalizeNumber(b,0,this._$tableRows.length,this._$tableRows.length)};if(c==true){e.isNewRow=true}if(d==false){e.animationsEnabled=false}this._addRow(a,e)},_addRow:function(a,b){b=$.extend({index:this._$tableRows.length,isNewRow:false,animationsEnabled:true},b);if(this._$tableRows.length<=0){this._removeNoDataRow()}b.index=this._normalizeNumber(b.index,0,this._$tableRows.length,this._$tableRows.length);if(b.index==this._$tableRows.length){this._$tableBody.append(a);this._$tableRows.push(a)}else if(b.index==0){this._$tableBody.prepend(a);this._$tableRows.unshift(a)}else{this._$tableRows[b.index-1].after(a);this._$tableRows.splice(b.index,0,a)}this._onRowInserted(a,b.isNewRow);if(b.isNewRow){this._refreshRowStyles();if(this.options.animationsEnabled&&b.animationsEnabled){this._showNewRowAnimation(a)}}},_showNewRowAnimation:function(a){var b='jtable-row-created';a.addClass(b,'slow','',function(){a.removeClass(b,5000)})},_removeRowsFromTable:function(b,c){var d=this;if(b.length<=0){return}b.addClass('jtable-row-removed').remove();b.each(function(){var a=d._findRowIndex($(this));if(a>=0){d._$tableRows.splice(a,1)}});d._onRowsRemoved(b,c);if(d._$tableRows.length==0){d._addNoDataRow()}d._refreshRowStyles()},_findRowIndex:function(c){return this._findIndexInArray(c,this._$tableRows,function(a,b){return a.data('record')==b.data('record')})},_removeAllRows:function(a){if(this._$tableRows.length<=0){return}var b=this._$tableBody.find('tr.jtable-data-row');this._$tableBody.empty();this._$tableRows=[];this._onRowsRemoved(b,a);this._addNoDataRow()},_addNoDataRow:function(){if(this._$tableBody.find('>tr.jtable-no-data-row').length>0){return}var a=$('<tr></tr>').addClass('jtable-no-data-row').appendTo(this._$tableBody);var b=this._$table.find('thead th').length;$('<td></td>').attr('colspan',b).html(this.options.messages.noDataAvailable).appendTo(a)},_removeNoDataRow:function(){this._$tableBody.find('.jtable-no-data-row').remove()},_refreshRowStyles:function(){for(var i=0;i<this._$tableRows.length;i++){if(i%2==0){this._$tableRows[i].addClass('jtable-row-even')}else{this._$tableRows[i].removeClass('jtable-row-even')}}},_getDisplayTextForRecordField:function(a,b){var c=this.options.fields[b];var d=a[b];if(c.display){return c.display({record:a})}if(c.type=='date'){return this._getDisplayTextForDateRecordField(c,d)}else if(c.type=='checkbox'){return this._getCheckBoxTextForFieldByValue(b,d)}else if(c.options){var e=this._getOptionsForField(b,{record:a,value:d,source:'list',dependedValues:this._createDependedValuesUsingRecord(a,c.dependsOn)});return this._findOptionByValue(e,d).DisplayText}else{return d}},_createDependedValuesUsingRecord:function(a,b){if(!b){return{}}var c={};for(var i=0;i<b.length;i++){c[b[i]]=a[b[i]]}return c},_findOptionByValue:function(a,b){for(var i=0;i<a.length;i++){if(a[i].Value==b){return a[i]}}return{}},_getDisplayTextForDateRecordField:function(a,b){if(!b){return''}var c=a.displayFormat||this.options.defaultDateFormat;var d=this._parseDate(b);return $.datepicker.formatDate(c,d)},_getOptionsForField:function(a,b){var c=this.options.fields[a];var d=c.options;if($.isFunction(d)){b=$.extend(true,{_cacheCleared:false,dependedValues:{},clearCache:function(){this._cacheCleared=true}},b);d=d(b)}var e;if(typeof d=='string'){var f='options_'+a+'_'+d;if(b._cacheCleared||(!this._cache[f])){this._cache[f]=this._buildOptionsFromArray(this._downloadOptions(a,d));this._sortFieldOptions(this._cache[f],c.optionsSorting)}else{if(b.value!=undefined){var g=this._findOptionByValue(this._cache[f],b.value);if(g.DisplayText==undefined){this._cache[f]=this._buildOptionsFromArray(this._downloadOptions(a,d));this._sortFieldOptions(this._cache[f],c.optionsSorting)}}}e=this._cache[f]}else if(jQuery.isArray(d)){e=this._buildOptionsFromArray(d);this._sortFieldOptions(e,c.optionsSorting)}else{e=this._buildOptionsArrayFromObject(d);this._sortFieldOptions(e,c.optionsSorting)}return e},_downloadOptions:function(b,c){var d=this;var e=[];d._ajax({url:c,async:false,success:function(a){if(a.Result!='OK'){d._showError(a.Message);return}e=a.Options},error:function(){var a=d._formatString(d.options.messages.cannotLoadOptionsFor,b);d._showError(a)}});return e},_sortFieldOptions:function(c,d){if((!c)||(!c.length)||(!d)){return}var e;if(d.indexOf('value')==0){e=function(a){return a.Value}}else{e=function(a){return a.DisplayText}}var f;if($.type(e(c[0]))=='string'){f=function(a,b){return e(a).localeCompare(e(b))}}else{f=function(a,b){return e(a)-e(b)}}if(d.indexOf('desc')>0){c.sort(function(a,b){return f(b,a)})}else{c.sort(function(a,b){return f(a,b)})}},_buildOptionsArrayFromObject:function(c){var d=[];$.each(c,function(a,b){d.push({Value:a,DisplayText:b})});return d},_buildOptionsFromArray:function(a){var b=[];for(var i=0;i<a.length;i++){if($.isPlainObject(a[i])){b.push(a[i])}else{b.push({Value:a[i],DisplayText:a[i]})}}return b},_parseDate:function(a){if(a.indexOf('Date')>=0){return new Date(parseInt(a.substr(6),10))}else if(a.length==10){return new Date(parseInt(a.substr(0,4),10),parseInt(a.substr(5,2),10)-1,parseInt(a.substr(8,2),10))}else if(a.length==19){return new Date(parseInt(a.substr(0,4),10),parseInt(a.substr(5,2),10)-1,parseInt(a.substr(8,2),10),parseInt(a.substr(11,2),10),parseInt(a.substr(14,2),10),parseInt(a.substr(17,2),10))}else{this._logWarn('Given date is not properly formatted: '+a);return'format error!'}},_createToolBar:function(){this._$toolbarDiv=$('<div />').addClass('jtable-toolbar').appendTo(this._$titleDiv);for(var i=0;i<this.options.toolbar.items.length;i++){this._addToolBarItem(this.options.toolbar.items[i])}},_addToolBarItem:function(a){if((a==undefined)||(a.text==undefined&&a.icon==undefined)){this._logWarn('Can not add tool bar item since it is not valid!');this._logWarn(a);return null}var b=$('<span></span>').addClass('jtable-toolbar-item').appendTo(this._$toolbarDiv);if(a.cssClass){b.addClass(a.cssClass)}if(a.tooltip){b.attr('title',a.tooltip)}if(a.icon){var c=$('<span class="jtable-toolbar-item-icon"></span>').appendTo(b);if(a.icon===true){}else if($.type(a.icon==='string')){c.css('background','url("'+a.icon+'")')}}if(a.text){$('<span class=""></span>').html(a.text).addClass('jtable-toolbar-item-text').appendTo(b)}if(a.click){b.click(function(){a.click()})}var d=undefined;var e=undefined;if(this.options.toolbar.hoverAnimation){d=this.options.toolbar.hoverAnimationDuration;e=this.options.toolbar.hoverAnimationEasing}b.hover(function(){b.addClass('jtable-toolbar-item-hover',d,e)},function(){b.removeClass('jtable-toolbar-item-hover',d,e)});return b},_showError:function(a){this._$errorDialogDiv.find(".modal-body").html(a);this._$errorDialogDiv.modal("show")},_setBusyTimer:null,_showBusy:function(a,b){var c=this;c._$busyDiv.width(c._$mainContainer.width()).height(c._$mainContainer.height()).addClass('jtable-busy-panel-background-invisible').show();var d=function(){c._$busyDiv.removeClass('jtable-busy-panel-background-invisible');c._$busyMessageDiv.html(a).show()};if(b){if(c._setBusyTimer){return}c._setBusyTimer=setTimeout(d,b)}else{d()}},_hideBusy:function(){clearTimeout(this._setBusyTimer);this._setBusyTimer=null;this._$busyDiv.hide();this._$busyMessageDiv.html('').hide()},_isBusy:function(){return this._$busyMessageDiv.is(':visible')},_performAjaxCall:function(a,b,c,d,e){this._ajax({url:a,data:b,async:c,success:d,error:e})},_ajax:function(d){var e=$.extend({},this.options.ajaxSettings,d);e.success=function(a){if(d.success){d.success(a)}};e.error=function(a,b,c){if(h){a.abort();return}if(d.error){d.error(arguments)}};e.complete=function(){if(d.complete){d.complete()}};$.ajax(e)},_getKeyValueOfRecord:function(a){return a[this._keyField]},_setCookie:function(a,b){a=this._cookieKeyPrefix+a;var c=new Date();c.setDate(c.getDate()+30);document.cookie=encodeURIComponent(a)+'='+encodeURIComponent(b)+"; expires="+c.toUTCString()},_getCookie:function(a){a=this._cookieKeyPrefix+a;var b=document.cookie.split('; ');for(var i=0;i<b.length;i++){if(!b[i]){continue}var c=b[i].split('=');if(c.length!=2){continue}if(decodeURIComponent(c[0])===a){return decodeURIComponent(c[1]||'')}}return null},_generateCookieKeyPrefix:function(){var d=function(a){var b=0;if(a.length==0){return b}for(var i=0;i<a.length;i++){var c=a.charCodeAt(i);b=((b<<5)-b)+c;b=b&b}return b};var e='';if(this.options.tableId){e=e+this.options.tableId+'#'}e=e+this._columnList.join('$')+'#c'+this._$table.find('thead th').length;return'jtable#'+d(e)},_onLoadingRecords:function(){this._trigger("loadingRecords",null,{})},_onRecordsLoaded:function(a){this._trigger("recordsLoaded",null,{records:a.Records,serverResponse:a})},_onRowInserted:function(a,b){this._trigger("rowInserted",null,{row:a,record:a.data('record'),isNewRow:b})},_onRowsRemoved:function(a,b){this._trigger("rowsRemoved",null,{rows:a,reason:b})},_onCloseRequested:function(){this._trigger("closeRequested",null,{})}})}(jQuery));(function($){$.extend(true,$.hik.jtable.prototype,{_getPropertyOfObject:function(a,b){if(b.indexOf('.')<0){return a[b]}else{var c=b.substring(0,b.indexOf('.'));var d=b.substring(b.indexOf('.')+1);return this._getPropertyOfObject(a[c],d)}},_setPropertyOfObject:function(a,b,c){if(b.indexOf('.')<0){a[b]=c}else{var d=b.substring(0,b.indexOf('.'));var e=b.substring(b.indexOf('.')+1);this._setPropertyOfObject(a[d],e,c)}},_insertToArrayIfDoesNotExists:function(a,b){if($.inArray(b,a)<0){a.push(b)}},_findIndexInArray:function(c,d,e){if(!e){e=function(a,b){return a==b}}for(var i=0;i<d.length;i++){if(e(c,d[i])){return i}}return-1},_normalizeNumber:function(a,b,c,d){if(a==undefined||a==null||isNaN(a)){return d}if(a<b){return b}if(a>c){return c}return a},_formatString:function(){if(arguments.length==0){return null}var a=arguments[0];for(var i=1;i<arguments.length;i++){var b='{'+(i-1)+'}';a=a.replace(b,arguments[i])}return a},_logDebug:function(a){if(!window.console){return}console.log('jTable DEBUG: '+a)},_logInfo:function(a){if(!window.console){return}console.log('jTable INFO: '+a)},_logWarn:function(a){if(!window.console){return}console.log('jTable WARNING: '+a)},_logError:function(a){if(!window.console){return}console.log('jTable ERROR: '+a)}});if(!Array.prototype.indexOf){Array.prototype.indexOf=function(a){var b=this.length;var c=Number(arguments[1])||0;c=(c<0)?Math.ceil(c):Math.floor(c);if(c<0)c+=b;for(;c<b;c++){if(c in this&&this[c]===a)return c}return-1}}})(jQuery);(function($){$.extend(true,$.hik.jtable.prototype,{_submitFormUsingAjax:function(a,b,c,d){this._ajax({url:a,data:b,success:c,error:d})},_createInputLabelForRecordField:function(a){return $('<div />').addClass('jtable-input-label').html(this.options.fields[a].inputTitle||this.options.fields[a].title)},_createInputForRecordField:function(a){var b=a.fieldName,value=a.value,record=a.record,formType=a.formType,form=a.form;var c=this.options.fields[b];if(value==undefined||value==null){value=c.defaultValue}if(c.input){var d=$(c.input({value:value,record:record,formType:formType,form:form}));if(!d.attr('id')){d.attr('id','Edit-'+b)}return $('<div />').addClass('jtable-input jtable-custom-input').append(d)}if(c.type=='date'){return this._createDateInputForField(c,b,value)}else if(c.type=='textarea'){return this._createTextAreaForField(c,b,value)}else if(c.type=='password'){return this._createPasswordInputForField(c,b,value)}else if(c.type=='checkbox'){return this._createCheckboxForField(c,b,value)}else if(c.options){if(c.type=='radiobutton'){return this._createRadioButtonListForField(c,b,value,record,formType)}else{return this._createDropDownListForField(c,b,value,record,formType,form)}}else{return this._createTextInputForField(c,b,value)}},_createInputForHidden:function(a,b){if(b==undefined){b=""}return $('<input type="hidden" name="'+a+'" id="Edit-'+a+'"></input>').val(b)},_createDateInputForField:function(a,b,c){var d=$('<input class="'+a.inputClass+'" id="Edit-'+b+'" type="text" name="'+b+'"></input>');if(c!=undefined){d.val(c)}var e=a.displayFormat||this.options.defaultDateFormat;d.datepicker({dateFormat:e});return $('<div />').addClass('jtable-input jtable-date-input').append(d)},_createTextAreaForField:function(a,b,c){var d=$('<textarea class="'+a.inputClass+'" id="Edit-'+b+'" name="'+b+'"></textarea>');if(c!=undefined){d.val(c)}return $('<div />').addClass('jtable-input jtable-textarea-input').append(d)},_createTextInputForField:function(a,b,c){var d=$('<input class="'+a.inputClass+'" id="Edit-'+b+'" type="text" name="'+b+'"></input>');if(c!=undefined){d.val(c)}return $('<div />').addClass('jtable-input jtable-text-input').append(d)},_createPasswordInputForField:function(a,b,c){var d=$('<input class="'+a.inputClass+'" id="Edit-'+b+'" type="password" name="'+b+'"></input>');if(c!=undefined){d.val(c)}return $('<div />').addClass('jtable-input jtable-password-input').append(d)},_createCheckboxForField:function(b,c,d){var e=this;if(d==undefined){d=e._getCheckBoxPropertiesForFieldByState(c,false).Value}var f=$('<div />').addClass('jtable-input jtable-checkbox-input');var g=$('<input class="'+b.inputClass+'" id="Edit-'+c+'" type="checkbox" name="'+c+'" />').appendTo(f);if(d!=undefined){g.val(d)}var h=$('<span>'+(b.formText||e._getCheckBoxTextForFieldByValue(c,d))+'</span>').appendTo(f);if(e._getIsCheckBoxSelectedForFieldByValue(c,d)){g.attr('checked','checked')}var i=function(){var a=e._getCheckBoxPropertiesForFieldByState(c,g.is(':checked'));g.attr('value',a.Value);h.html(b.formText||a.DisplayText)};g.click(function(){i()});if(b.setOnTextClick!=false){h.addClass('jtable-option-text-clickable').click(function(){if(g.is(':checked')){g.attr('checked',false)}else{g.attr('checked',true)}i()})}return f},_createDropDownListForField:function(a,b,c,d,e,f){var g=$('<div />').addClass('jtable-input jtable-dropdown-input');var h=$('<select class="'+a.inputClass+'" id="Edit-'+b+'" name="'+b+'"></select>').appendTo(g);var i=this._getOptionsForField(b,{record:d,source:e,form:f,dependedValues:this._createDependedValuesUsingForm(f,a.dependsOn)});this._fillDropDownListWithOptions(h,i,c);return g},_fillDropDownListWithOptions:function(a,b,c){a.empty();for(var i=0;i<b.length;i++){$('<option'+(b[i].Value==c?' selected="selected"':'')+'>'+b[i].DisplayText+'</option>').val(b[i].Value).appendTo(a)}},_createDependedValuesUsingForm:function(a,b){if(!b){return{}}var c={};for(var i=0;i<b.length;i++){var d=b[i];var e=a.find('select[name='+d+']');if(e.length<=0){continue}c[d]=e.val()}return c},_createRadioButtonListForField:function(e,f,g,h,j){var k=$('<div />').addClass('jtable-input jtable-radiobuttonlist-input');var l=this._getOptionsForField(f,{record:h,source:j});$.each(l,function(i,a){var b=$('<div class=""></div>').addClass('jtable-radio-input').appendTo(k);var c=$('<input type="radio" id="Edit-'+f+'-'+i+'" class="'+e.inputClass+'" name="'+f+'"'+((a.Value==(g+''))?' checked="true"':'')+' />').val(a.Value).appendTo(b);var d=$('<span></span>').html(a.DisplayText).appendTo(b);if(e.setOnTextClick!=false){d.addClass('jtable-option-text-clickable').click(function(){if(!c.is(':checked')){c.attr('checked',true)}})}});return k},_getCheckBoxTextForFieldByValue:function(a,b){return this.options.fields[a].values[b]},_getIsCheckBoxSelectedForFieldByValue:function(a,b){return(this._createCheckBoxStateArrayForFieldWithCaching(a)[1].Value.toString()==b.toString())},_getCheckBoxPropertiesForFieldByState:function(a,b){return this._createCheckBoxStateArrayForFieldWithCaching(a)[(b?1:0)]},_createCheckBoxStateArrayForFieldWithCaching:function(a){var b='checkbox_'+a;if(!this._cache[b]){this._cache[b]=this._createCheckBoxStateArrayForField(a)}return this._cache[b]},_createCheckBoxStateArrayForField:function(c){var d=[];var e=0;$.each(this.options.fields[c].values,function(a,b){if(e++<2){d.push({'Value':a,'DisplayText':b})}});return d},_makeCascadeDropDowns:function(i,j,k){var l=this;i.find('select').each(function(){var f=$(this);var g=f.attr('name');if(!g){return}var h=l.options.fields[g];if(!h.dependsOn){return}$.each(h.dependsOn,function(c,d){var e=i.find('select[name='+d+']');e.change(function(){var a={record:j,source:k,form:i,dependedValues:{}};a.dependedValues=l._createDependedValuesUsingForm(i,h.dependsOn);var b=l._getOptionsForField(g,a);l._fillDropDownListWithOptions(f,b,undefined);f.change()})})})},_updateRecordValuesFromForm:function(a,b){for(var i=0;i<this._fieldList.length;i++){var c=this._fieldList[i];var d=this.options.fields[c];if(d.edit==false){continue}var f=b.find('[name="'+c+'"]');if(f.length<=0){continue}if(d.type=='date'){var g=f.val();if(g){var h=d.displayFormat||this.options.defaultDateFormat;try{var j=$.datepicker.parseDate(h,g);a[c]='/Date('+j.getTime()+')/'}catch(e){this._logWarn('Date format is incorrect for field '+c+': '+g);a[c]=undefined}}else{this._logDebug('Date is empty for '+c);a[c]=undefined}}else if(d.options&&d.type=='radiobutton'){var k=f.filter(':checked');if(k.length){a[c]=k.val()}else{a[c]=undefined}}else{a[c]=f.val()}}},_setEnabledOfDialogButton:function(a,b,c,d){if(!b){return}if(a){if(c!=false){b.removeAttr('disabled').removeClass('disabled')}else{b.attr('disabled','disabled').addClass('disabled')}if(d){b.html(d)}}else{if(c!=false){b.removeAttr('disabled').removeClass('ui-state-disabled')}else{b.attr('disabled','disabled').addClass('ui-state-disabled')}if(d){b.find('span').text(d)}}}})})(jQuery);(function($){var f={_create:$.hik.jtable.prototype._create};$.extend(true,$.hik.jtable.prototype,{options:{recordAdded:function(a,b){},messages:{addNewRecord:'Add new record'}},_$addRecordDiv:null,_create:function(){f._create.apply(this,arguments);if(!this.options.actions.createAction){return}this._createAddRecordDialogDiv()},_createAddRecordDialogDiv:function(){var d=this;d._$addRecordDiv=$('<div />').appendTo(d._$mainContainer);d._$addRecordDiv.addClass("modal fade");d._$addRecordDiv.css({width:'auto'});d._$addRecordDiv.append('<div class="modal-dialog"><div class="modal-content"><div class="modal-header">'+'<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>'+'<h3>'+d.options.messages.addNewRecord+'</h3></div>'+'<div class="modal-body" style="min-width: 300px;"></div>'+'<div class="modal-footer">'+'<a href="#" class="btn" data-dismiss="modal" aria-hidden="true">'+d.options.messages.cancel+'</a>'+'<a id="AddRecordDialogSaveButton" href="#" class="save btn btn-primary">'+d.options.messages.save+'</a></div>'+'</div></div>');d._$addRecordDiv.find(".save").click(function(a){d._onSaveClickedOnCreateForm()});d._$addRecordDiv.modal({show:false});d._$addRecordDiv.on("hide.bs.modal",function(a){var b=d._$addRecordDiv.find('form').first();var c=$('#AddRecordDialogSaveButton');d._trigger("formClosed",null,{form:b,formType:'create'});d._setEnabledOfDialogButton(true,c,true,d.options.messages.save);b.remove()});if(d.options.addRecordButton){d.options.addRecordButton.click(function(e){e.preventDefault();d._showAddRecordForm()})}else{d._addToolBarItem({icon:true,cssClass:'jtable-toolbar-item-add-record',text:d.options.messages.addNewRecord,click:function(){d._showAddRecordForm()}})}},_onSaveClickedOnCreateForm:function(){var a=this;var b=$('#AddRecordDialogSaveButton');var c=a._$addRecordDiv.find('form');if(a._trigger("formSubmitting",null,{form:c,formType:'create'})!=false){a._setEnabledOfDialogButton(true,b,false,a.options.messages.saving);a._saveAddRecordForm(c,b)}},showCreateForm:function(){this._showAddRecordForm()},addRecord:function(b){var c=this;b=$.extend({clientOnly:false,animationsEnabled:c.options.animationsEnabled,url:c.options.actions.createAction,success:function(){},error:function(){}},b);if(!b.record){c._logWarn('options parameter in addRecord method must contain a record property.');return}if(b.clientOnly){c._addRow(c._createRowFromRecord(b.record),{isNewRow:true,animationsEnabled:b.animationsEnabled});b.success();return}c._submitFormUsingAjax(b.url,$.param(b.record),function(a){if(a.Result!='OK'){c._showError(a.Message);b.error(a);return}if(!a.Record){c._logError('Server must return the created Record object.');b.error(a);return}c._onRecordAdded(a);c._addRow(c._createRowFromRecord(a.Record),{isNewRow:true,animationsEnabled:b.animationsEnabled});b.success(a)},function(){c._showError(c.options.messages.serverCommunicationError);b.error()})},_showAddRecordForm:function(){var a=this;var b=$('<form id="jtable-create-form" class="jtable-dialog-form jtable-create-form"></form>');for(var i=0;i<a._fieldList.length;i++){var c=a._fieldList[i];var d=a.options.fields[c];if(d.key==true&&d.create!=true){continue}if(d.create==false){continue}if(d.type=='hidden'){b.append(a._createInputForHidden(c,d.defaultValue));continue}var e=$('<div />').addClass('jtable-input-field-container').appendTo(b);e.append(a._createInputLabelForRecordField(c));e.append(a._createInputForRecordField({fieldName:c,formType:'create',form:b}))}a._makeCascadeDropDowns(b,undefined,'create');b.submit(function(){a._onSaveClickedOnCreateForm();return false});a._$addRecordDiv.find(".modal-body").append(b);a._$addRecordDiv.modal('show');a._trigger("formCreated",null,{form:b,formType:'create'})},_saveAddRecordForm:function(b,c){var d=this;b.data('submitting',true);d._submitFormUsingAjax(d.options.actions.createAction,b.serialize(),function(a){if(a.Result!='OK'){d._showError(a.Message);d._setEnabledOfDialogButton(true,c,true,d.options.messages.save);return}if(!a.Record){d._logError('Server must return the created Record object.');d._setEnabledOfDialogButton(true,c,true,d.options.messages.save);return}d._onRecordAdded(a);d._addRow(d._createRowFromRecord(a.Record),{isNewRow:true});d._$addRecordDiv.modal("hide")},function(){d._showError(d.options.messages.serverCommunicationError);d._setEnabledOfDialogButton(true,c,true,d.options.messages.save)})},_onRecordAdded:function(a){this._trigger("recordAdded",null,{record:a.Record,serverResponse:a})}})})(jQuery);(function($){var k={_create:$.hik.jtable.prototype._create,_addColumnsToHeaderRow:$.hik.jtable.prototype._addColumnsToHeaderRow,_addCellsToRowUsingRecord:$.hik.jtable.prototype._addCellsToRowUsingRecord};$.extend(true,$.hik.jtable.prototype,{options:{recordUpdated:function(a,b){},rowUpdated:function(a,b){},messages:{editRecord:'Edit Record'}},_$editDiv:null,_$editingRow:null,_create:function(){k._create.apply(this,arguments);if(!this.options.actions.updateAction){return}this._createEditDialogDiv()},_createEditDialogDiv:function(){var d=this;d._$editDiv=$('<div></div>').appendTo(d._$mainContainer);d._$editDiv.addClass("modal fade");d._$editDiv.css({width:'auto'});d._$editDiv.append('<div class="modal-dialog"><div class="modal-content"><div class="modal-header">'+'<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>'+'<h3>'+d.options.messages.editRecord+'</h3></div>'+'<div class="modal-body" style="min-width: 300px;"></div>'+'<div class="modal-footer">'+'<a href="#" class="btn" data-dismiss="modal" aria-hidden="true">'+d.options.messages.cancel+'</a>'+'<a id="EditDialogSaveButton" href="#" class="save btn btn-primary">'+d.options.messages.save+'</a></div></div></div>');d._$editDiv.find(".save").click(function(a){d._onSaveClickedOnEditForm()});d._$editDiv.modal({show:false});d._$editDiv.on("hide.bs.modal",function(a){var b=d._$editDiv.find('form:first');var c=$('#EditDialogSaveButton');d._trigger("formClosed",null,{form:b,formType:'edit',row:d._$editingRow});d._setEnabledOfDialogButton(true,c,true,d.options.messages.save);b.remove()})},_onSaveClickedOnEditForm:function(){var a=this;if(a._$editingRow.hasClass('jtable-row-removed')){a._$editDiv.modal("hide");return}var b=$('#EditDialogSaveButton');var c=a._$editDiv.find('form');if(a._trigger("formSubmitting",null,{form:c,formType:'edit',row:a._$editingRow})!=false){a._setEnabledOfDialogButton(true,b,false,a.options.messages.saving);a._saveEditForm(c,b)}},updateRecord:function(b){var c=this;b=$.extend({clientOnly:false,animationsEnabled:c.options.animationsEnabled,url:c.options.actions.updateAction,success:function(){},error:function(){}},b);if(!b.record){c._logWarn('options parameter in updateRecord method must contain a record property.');return}var d=c._getKeyValueOfRecord(b.record);if(d==undefined||d==null){c._logWarn('options parameter in updateRecord method must contain a record that contains the key field property.');return}var e=c.getRowByKey(d);if(e==null){c._logWarn('Can not found any row by key: '+d);return}if(b.clientOnly){$.extend(e.data('record'),b.record);c._updateRowTexts(e);c._onRecordUpdated(e,null);if(b.animationsEnabled){c._showUpdateAnimationForRow(e)}b.success();return}c._submitFormUsingAjax(b.url,$.param(b.record),function(a){if(a.Result!='OK'){c._showError(a.Message);b.error(a);return}$.extend(e.data('record'),b.record);c._updateRecordValuesFromServerResponse(e.data('record'),a);c._updateRowTexts(e);c._onRecordUpdated(e,a);if(b.animationsEnabled){c._showUpdateAnimationForRow(e)}b.success(a)},function(){c._showError(c.options.messages.serverCommunicationError);b.error()})},_addColumnsToHeaderRow:function(a){k._addColumnsToHeaderRow.apply(this,arguments);if(this.options.actions.updateAction!=undefined){a.append(this._createEmptyCommandHeader())}},_addCellsToRowUsingRecord:function(a){var b=this;k._addCellsToRowUsingRecord.apply(this,arguments);if(b.options.actions.updateAction!=undefined){var c=$('<span></span>').html(b.options.messages.editRecord);var d=$('<button title="'+b.options.messages.editRecord+'"></button>').addClass('jtable-command-button jtable-edit-command-button').append(c).click(function(e){e.preventDefault();e.stopPropagation();b._showEditForm(a)});$('<td></td>').addClass('jtable-command-column').append(d).appendTo(a)}},_showEditForm:function(a){var b=this;var c=a.data('record');var d=$('<form id="jtable-edit-form" class="jtable-dialog-form jtable-edit-form"></form>');for(var i=0;i<b._fieldList.length;i++){var e=b._fieldList[i];var f=b.options.fields[e];var g=c[e];if(f.key==true){if(f.edit!=true){d.append(b._createInputForHidden(e,g));continue}else{d.append(b._createInputForHidden('jtRecordKey',g))}}if(f.edit==false){continue}if(f.type=='hidden'){d.append(b._createInputForHidden(e,g));continue}var h=$('<div class="jtable-input-field-container"></div>').appendTo(d);h.append(b._createInputLabelForRecordField(e));var j=b._getValueForRecordField(c,e);h.append(b._createInputForRecordField({fieldName:e,value:j,record:c,formType:'edit',form:d}))}b._makeCascadeDropDowns(d,c,'edit');d.submit(function(){b._onSaveClickedOnEditForm();return false});b._$editingRow=a;b._$editDiv.find(".modal-body").html(d);b._$editDiv.modal("show");b._trigger("formCreated",null,{form:d,formType:'edit',record:c,row:a})},_saveEditForm:function(c,d){var e=this;e._submitFormUsingAjax(e.options.actions.updateAction,c.serialize(),function(a){if(a.Result!='OK'){e._showError(a.Message);e._setEnabledOfDialogButton(true,d,true,e.options.messages.save);return}var b=e._$editingRow.data('record');e._updateRecordValuesFromForm(b,c);e._updateRecordValuesFromServerResponse(b,a);e._updateRowTexts(e._$editingRow);e._$editingRow.attr('data-record-key',e._getKeyValueOfRecord(b));e._onRecordUpdated(e._$editingRow,a);if(e.options.animationsEnabled){e._showUpdateAnimationForRow(e._$editingRow)}e._$editDiv.modal("hide")},function(){e._showError(e.options.messages.serverCommunicationError);e._setEnabledOfDialogButton(true,d,true,e.options.messages.save)})},_updateRecordValuesFromServerResponse:function(a,b){if(!b||!b.Record){return}$.extend(true,a,b.Record)},_getValueForRecordField:function(a,b){var c=this.options.fields[b];var d=a[b];if(c.type=='date'){return this._getDisplayTextForDateRecordField(c,d)}else{return d}},_updateRowTexts:function(a){var b=a.data('record');var c=a.find('td');for(var i=0;i<this._columnList.length;i++){var d=this._getDisplayTextForRecordField(b,this._columnList[i]);if(d==0)d="0";c.eq(this._firstDataColumnOffset+i).html(d||'')}this._onRowUpdated(a)},_showUpdateAnimationForRow:function(a){var b='jtable-row-updated';a.stop(true,true).addClass(b,'slow','',function(){a.removeClass(b,5000)})},_onRowUpdated:function(a){this._trigger("rowUpdated",null,{row:a,record:a.data('record')})},_onRecordUpdated:function(a,b){this._trigger("recordUpdated",null,{record:a.data('record'),row:a,serverResponse:b})}})})(jQuery);(function($){var h={_create:$.hik.jtable.prototype._create,_addColumnsToHeaderRow:$.hik.jtable.prototype._addColumnsToHeaderRow,_addCellsToRowUsingRecord:$.hik.jtable.prototype._addCellsToRowUsingRecord};$.extend(true,$.hik.jtable.prototype,{options:{deleteConfirmation:true,recordDeleted:function(a,b){},messages:{deleteConfirmation:'This record will be deleted. Are you sure?',deleteText:'Delete',deleting:'Deleting',canNotDeletedRecords:'Can not delete {0} of {1} records!',deleteProggress:'Deleting {0} of {1} records, processing...'}},_$deleteRecordDiv:null,_$deletingRow:null,_create:function(){h._create.apply(this,arguments);this._createDeleteDialogDiv()},_createDeleteDialogDiv:function(){var d=this;if(!d.options.actions.deleteAction){return}d._$deleteRecordDiv=$('<div />').appendTo(d._$mainContainer);d._$deleteRecordDiv.addClass("modal fade");d._$deleteRecordDiv.append('<div class="modal-dialog"><div class="modal-content"><div class="modal-header">'+'<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>'+'<h3>'+d.options.messages.areYouSure+'</h3></div>'+'<div class="modal-body" style="min-width: 300px; min-heigth: 300px;"></div>'+'<div class="modal-footer">'+'<a href="#" class="btn" data-dismiss="modal" aria-hidden="true">'+d.options.messages.cancel+'</a>'+'<a id="DeleteDialogButton" href="#" class="save btn btn-primary">'+d.options.messages.deleteText+'</a></div></div></div>');d._$deleteRecordDiv.modal({show:false});d._$deleteRecordDiv.find("#DeleteDialogButton").click(function(b){if(d._$deletingRow.hasClass('jtable-row-removed')){d._$deleteRecordDiv.dialog('close');return}var c=$(this);d._setEnabledOfDialogButton(true,c,false,d.options.messages.deleting);d._deleteRecordFromServer(d._$deletingRow,function(){d._removeRowsFromTableWithAnimation(d._$deletingRow);d._$deleteRecordDiv.modal("hide")},function(a){d._showError(a);d._setEnabledOfDialogButton(true,c,true,d.options.messages.deleteText)})});d._$deleteRecordDiv.on("hidden",function(a){var b=$(this).find('#DeleteDialogButton');d._setEnabledOfDialogButton(true,b,true,d.options.messages.deleteText)})},deleteRows:function(b){var c=this;if(b.length<=0){c._logWarn('No rows specified to jTable deleteRows method.');return}if(c._isBusy()){c._logWarn('Can not delete rows since jTable is busy!');return}if(b.length==1){c._deleteRecordFromServer(b,function(){c._removeRowsFromTableWithAnimation(b)},function(a){c._showError(a)});return}c._showBusy(c._formatString(c.options.messages.deleteProggress,0,b.length));var d=0;var e=function(){return(d>=b.length)};var f=function(){var a=b.filter('.jtable-row-ready-to-remove');if(a.length<b.length){c._showError(c._formatString(c.options.messages.canNotDeletedRecords,b.length-a.length,b.length))}if(a.length>0){c._removeRowsFromTableWithAnimation(a)}c._hideBusy()};var g=0;b.each(function(){var a=$(this);c._deleteRecordFromServer(a,function(){++g;++d;a.addClass('jtable-row-ready-to-remove');c._showBusy(c._formatString(c.options.messages.deleteProggress,g,b.length));if(e()){f()}},function(){++d;if(e()){f()}})})},deleteRecord:function(b){var c=this;b=$.extend({clientOnly:false,animationsEnabled:c.options.animationsEnabled,url:c.options.actions.deleteAction,success:function(){},error:function(){}},b);if(b.key==undefined){c._logWarn('options parameter in deleteRecord method must contain a key property.');return}var d=c.getRowByKey(b.key);if(d==null){c._logWarn('Can not found any row by key: '+b.key);return}if(b.clientOnly){c._removeRowsFromTableWithAnimation(d,b.animationsEnabled);b.success();return}c._deleteRecordFromServer(d,function(a){c._removeRowsFromTableWithAnimation(d,b.animationsEnabled);b.success(a)},function(a){c._showError(a);b.error(a)},b.url)},_addColumnsToHeaderRow:function(a){h._addColumnsToHeaderRow.apply(this,arguments);if(this.options.actions.deleteAction!=undefined){a.append(this._createEmptyCommandHeader())}},_addCellsToRowUsingRecord:function(a){h._addCellsToRowUsingRecord.apply(this,arguments);var b=this;if(b.options.actions.deleteAction!=undefined){var c=$('<span></span>').html(b.options.messages.deleteText);var d=$('<button title="'+b.options.messages.deleteText+'"></button>').addClass('jtable-command-button jtable-delete-command-button').append(c).click(function(e){e.preventDefault();e.stopPropagation();b._deleteButtonClickedForRow(a)});$('<td></td>').addClass('jtable-command-column').append(d).appendTo(a)}},_deleteButtonClickedForRow:function(b){var c=this;var d;var e=c.options.messages.deleteConfirmation;if($.isFunction(c.options.deleteConfirmation)){var f={row:b,record:b.data('record'),deleteConfirm:true,deleteConfirmMessage:e,cancel:false,cancelMessage:null};c.options.deleteConfirmation(f);if(f.cancel){if(f.cancelMessage){c._showError(f.cancelMessage)}return}e=f.deleteConfirmMessage;d=f.deleteConfirm}else{d=c.options.deleteConfirmation}if(d!=false){c._$deleteRecordDiv.find(".modal-body").html(e);c._showDeleteDialog(b)}else{c._deleteRecordFromServer(b,function(){c._removeRowsFromTableWithAnimation(b)},function(a){c._showError(a)})}},_showDeleteDialog:function(a){this._$deletingRow=a;this._$deleteRecordDiv.modal("show")},_deleteRecordFromServer:function(b,c,d,e){var f=this;if(b.data('deleting')==true){return}b.data('deleting',true);var g={};g[f._keyField]=f._getKeyValueOfRecord(b.data('record'));this._ajax({url:(e||f.options.actions.deleteAction),data:g,success:function(a){if(a.Result!='OK'){b.data('deleting',false);if(d){d(a.Message)}return}f._trigger("recordDeleted",null,{record:b.data('record'),row:b,serverResponse:a});if(c){c(a)}},error:function(){b.data('deleting',false);if(d){d(f.options.messages.serverCommunicationError)}}})},_removeRowsFromTableWithAnimation:function(a,b){var c=this;if(b==undefined){b=c.options.animationsEnabled}if(b){var d='jtable-row-deleting danger';a.stop(true,true).addClass(d,'slow','').promise().done(function(){c._removeRowsFromTable(a,'deleted')})}else{c._removeRowsFromTable(a,'deleted')}}})})(jQuery);(function($){var e={_create:$.hik.jtable.prototype._create,_addColumnsToHeaderRow:$.hik.jtable.prototype._addColumnsToHeaderRow,_addCellsToRowUsingRecord:$.hik.jtable.prototype._addCellsToRowUsingRecord,_onLoadingRecords:$.hik.jtable.prototype._onLoadingRecords,_onRecordsLoaded:$.hik.jtable.prototype._onRecordsLoaded,_onRowsRemoved:$.hik.jtable.prototype._onRowsRemoved};$.extend(true,$.hik.jtable.prototype,{options:{selecting:false,multiselect:false,selectingCheckboxes:false,selectOnRowClick:true,selectionChanged:function(a,b){}},_selectedRecordIdsBeforeLoad:null,_$selectAllCheckbox:null,_shiftKeyDown:false,_create:function(){if(this.options.selecting&&this.options.selectingCheckboxes){++this._firstDataColumnOffset;this._bindKeyboardEvents()}e._create.apply(this,arguments)},_bindKeyboardEvents:function(){var b=this;$(document).keydown(function(a){switch(a.which){case 16:b._shiftKeyDown=true;break}}).keyup(function(a){switch(a.which){case 16:b._shiftKeyDown=false;break}})},selectedRows:function(){return this._getSelectedRows()},selectRows:function(a){this._selectRows(a);this._onSelectionChanged()},_addColumnsToHeaderRow:function(a){if(this.options.selecting&&this.options.selectingCheckboxes){if(this.options.multiselect){a.append(this._createSelectAllHeader())}else{a.append(this._createEmptyCommandHeader())}}e._addColumnsToHeaderRow.apply(this,arguments)},_addCellsToRowUsingRecord:function(a){if(this.options.selecting){this._makeRowSelectable(a)}e._addCellsToRowUsingRecord.apply(this,arguments)},_onLoadingRecords:function(){if(this.options.selecting){this._storeSelectionList()}e._onLoadingRecords.apply(this,arguments)},_onRecordsLoaded:function(){if(this.options.selecting){this._restoreSelectionList()}e._onRecordsLoaded.apply(this,arguments)},_onRowsRemoved:function(a,b){if(this.options.selecting&&(b!='reloading')&&(a.filter('.jtable-row-selected').length>0)){this._onSelectionChanged()}e._onRowsRemoved.apply(this,arguments)},_createSelectAllHeader:function(){var b=this;var c=$('<th class=""></th>').addClass('jtable-command-column-header jtable-column-header-selecting');var d=$('<div />').addClass('jtable-column-header-container').appendTo(c);b._$selectAllCheckbox=$('<input type="checkbox" />').appendTo(d).click(function(){if(b._$tableRows.length<=0){b._$selectAllCheckbox.attr('checked',false);return}var a=b._$tableBody.find('>tr.jtable-data-row');if(b._$selectAllCheckbox.is(':checked')){b._selectRows(a)}else{b._deselectRows(a)}b._onSelectionChanged()});return c},_storeSelectionList:function(){var a=this;if(!a.options.selecting){return}a._selectedRecordIdsBeforeLoad=[];a._getSelectedRows().each(function(){a._selectedRecordIdsBeforeLoad.push(a._getKeyValueOfRecord($(this).data('record')))})},_restoreSelectionList:function(){var a=this;if(!a.options.selecting){return}var b=0;for(var i=0;i<a._$tableRows.length;++i){var c=a._getKeyValueOfRecord(a._$tableRows[i].data('record'));if($.inArray(c,a._selectedRecordIdsBeforeLoad)>-1){a._selectRows(a._$tableRows[i]);++b}}if(a._selectedRecordIdsBeforeLoad.length>0&&a._selectedRecordIdsBeforeLoad.length!=b){a._onSelectionChanged()}a._selectedRecordIdsBeforeLoad=[];a._refreshSelectAllCheckboxState()},_getSelectedRows:function(){return this._$tableBody.find('>tr.jtable-row-selected')},_makeRowSelectable:function(a){var b=this;if(b.options.selectOnRowClick){a.click(function(){b._invertRowSelection(a)})}if(b.options.selectingCheckboxes){var c=$('<td></td>').addClass('jtable-selecting-column');var d=$('<input type="checkbox" />').appendTo(c);if(!b.options.selectOnRowClick){d.click(function(){b._invertRowSelection(a)})}a.append(c)}},_invertRowSelection:function(a){if(a.hasClass('jtable-row-selected')){this._deselectRows(a)}else{if(this._shiftKeyDown){var b=this._findRowIndex(a);var c=this._findFirstSelectedRowIndexBeforeIndex(b)+1;if(c>0&&c<b){this._selectRows(this._$tableBody.find('tr').slice(c,b+1))}else{var d=this._findFirstSelectedRowIndexAfterIndex(b)-1;if(d>b){this._selectRows(this._$tableBody.find('tr').slice(b,d+1))}else{this._selectRows(a)}}}else{this._selectRows(a)}}this._onSelectionChanged()},_findFirstSelectedRowIndexBeforeIndex:function(a){for(var i=a-1;i>=0;--i){if(this._$tableRows[i].hasClass('jtable-row-selected')){return i}}return-1},_findFirstSelectedRowIndexAfterIndex:function(a){for(var i=a+1;i<this._$tableRows.length;++i){if(this._$tableRows[i].hasClass('jtable-row-selected')){return i}}return-1},_selectRows:function(a){if(!this.options.multiselect){this._deselectRows(this._getSelectedRows())}a.addClass('jtable-row-selected active');if(this.options.selectingCheckboxes){a.find('>td.jtable-selecting-column >input').prop('checked',true)}this._refreshSelectAllCheckboxState()},_deselectRows:function(a){a.removeClass('jtable-row-selected active');if(this.options.selectingCheckboxes){a.find('>td.jtable-selecting-column >input').prop('checked',false)}this._refreshSelectAllCheckboxState()},_refreshSelectAllCheckboxState:function(){if(!this.options.selectingCheckboxes||!this.options.multiselect){return}var a=this._$tableRows.length;var b=this._getSelectedRows().length;if(b==0){this._$selectAllCheckbox.prop('indeterminate',false);this._$selectAllCheckbox.attr('checked',false)}else if(b==a){this._$selectAllCheckbox.prop('indeterminate',false);this._$selectAllCheckbox.attr('checked',true)}else{this._$selectAllCheckbox.attr('checked',false);this._$selectAllCheckbox.prop('indeterminate',true)}},_onSelectionChanged:function(){this._trigger("selectionChanged",null,{})}})})(jQuery);(function($){var h={load:$.hik.jtable.prototype.load,_create:$.hik.jtable.prototype._create,_setOption:$.hik.jtable.prototype._setOption,_createRecordLoadUrl:$.hik.jtable.prototype._createRecordLoadUrl,_addRowToTable:$.hik.jtable.prototype._addRowToTable,_addRow:$.hik.jtable.prototype._addRow,_removeRowsFromTable:$.hik.jtable.prototype._removeRowsFromTable,_onRecordsLoaded:$.hik.jtable.prototype._onRecordsLoaded};$.extend(true,$.hik.jtable.prototype,{options:{paging:false,pageList:'normal',pageSize:10,pageSizes:[10,25,50,100,250,500],pageSizeChangeArea:true,gotoPageArea:'combobox',messages:{pagingInfo:'Showing {0}-{1} of {2}',pageSizeChangeLabel:'Row count',gotoPageLabel:'Go to page'}},_$bottomPanel:null,_$pagingListArea:null,_$pageSizeChangeArea:null,_$pageInfoSpan:null,_$gotoPageArea:null,_$gotoPageInput:null,_totalRecordCount:0,_currentPageNo:1,_create:function(){h._create.apply(this,arguments);if(this.options.paging){this._loadPagingSettings();this._createBottomPanel();this._createPageListArea();this._createGotoPageInput();this._createPageSizeSelection()}},_loadPagingSettings:function(){if(!this.options.saveUserPreferences){return}var a=this._getCookie('page-size');if(a){this.options.pageSize=this._normalizeNumber(a,1,1000000,this.options.pageSize)}},_createBottomPanel:function(){this._$bottomPanel=$('<div />').addClass('jtable-bottom-panel').insertAfter(this._$table);$('<div />').addClass('jtable-left-area').appendTo(this._$bottomPanel);$('<div />').addClass('jtable-right-area').appendTo(this._$bottomPanel)},_createPageListArea:function(){this._$pagingListArea=$('<span></span>').addClass('jtable-page-list').appendTo(this._$bottomPanel.find('.jtable-left-area'));this._$pageInfoSpan=$('<span></span>').addClass('jtable-page-info').appendTo(this._$bottomPanel.find('.jtable-right-area'))},_createPageSizeSelection:function(){var c=this;if(!c.options.pageSizeChangeArea){return}if(c._findIndexInArray(c.options.pageSize,c.options.pageSizes)<0){c.options.pageSizes.push(parseInt(c.options.pageSize));c.options.pageSizes.sort(function(a,b){return a-b})}c._$pageSizeChangeArea=$('<span></span>').addClass('jtable-page-size-change').appendTo(c._$bottomPanel.find('.jtable-left-area'));c._$pageSizeChangeArea.append('<span>'+c.options.messages.pageSizeChangeLabel+': </span>');var d=$('<select></select>').appendTo(c._$pageSizeChangeArea);for(var i=0;i<c.options.pageSizes.length;i++){d.append('<option value="'+c.options.pageSizes[i]+'">'+c.options.pageSizes[i]+'</option>')}d.val(c.options.pageSize);d.change(function(){c._changePageSize(parseInt($(this).val()))})},_createGotoPageInput:function(){var c=this;if(!c.options.gotoPageArea||c.options.gotoPageArea=='none'){return}this._$gotoPageArea=$('<span></span>').addClass('jtable-goto-page').appendTo(c._$bottomPanel.find('.jtable-left-area'));this._$gotoPageArea.append('<span>'+c.options.messages.gotoPageLabel+': </span>');if(c.options.gotoPageArea=='combobox'){c._$gotoPageInput=$('<select></select>').appendTo(this._$gotoPageArea).data('pageCount',1).change(function(){c._changePage(parseInt($(this).val()))});c._$gotoPageInput.append('<option value="1">1</option>')}else{c._$gotoPageInput=$('<input type="text" maxlength="10" value="'+c._currentPageNo+'" />').appendTo(this._$gotoPageArea).keypress(function(a){if(a.which==13){a.preventDefault();c._changePage(parseInt(c._$gotoPageInput.val()))}else if(a.which==43){a.preventDefault();c._changePage(parseInt(c._$gotoPageInput.val())+1)}else if(a.which==45){a.preventDefault();c._changePage(parseInt(c._$gotoPageInput.val())-1)}else{var b=((47<a.keyCode&&a.keyCode<58&&a.shiftKey==false&&a.altKey==false)||(a.keyCode==8)||(a.keyCode==9));if(!b){a.preventDefault()}}})}},_refreshGotoPageInput:function(){if(!this.options.gotoPageArea||this.options.gotoPageArea=='none'){return}if(this._totalRecordCount<=0){this._$gotoPageArea.hide()}else{this._$gotoPageArea.show()}if(this.options.gotoPageArea=='combobox'){var a=this._$gotoPageInput.data('pageCount');var b=this._calculatePageCount();if(a!=b){this._$gotoPageInput.empty();var c=1;if(b>10000){c=100}else if(b>5000){c=10}else if(b>2000){c=5}else if(b>1000){c=2}for(var i=c;i<=b;i+=c){this._$gotoPageInput.append('<option value="'+i+'">'+i+'</option>')}this._$gotoPageInput.data('pageCount',b)}}this._$gotoPageInput.val(this._currentPageNo)},load:function(){this._currentPageNo=1;h.load.apply(this,arguments)},_setOption:function(a,b){h._setOption.apply(this,arguments);if(a=='pageSize'){this._changePageSize(parseInt(b))}},_changePageSize:function(a){if(a==this.options.pageSize){return}this.options.pageSize=a;var b=this._calculatePageCount();if(this._currentPageNo>b){this._currentPageNo=b}if(this._currentPageNo<=0){this._currentPageNo=1}var c=this._$bottomPanel.find('.jtable-page-size-change select');if(c.length>0){if(parseInt(c.val())!=a){var d=c.find('option[value='+a+']');if(d.length>0){c.val(a)}}}this._savePagingSettings();this._reloadTable()},_savePagingSettings:function(){if(!this.options.saveUserPreferences){return}this._setCookie('page-size',this.options.pageSize)},_createRecordLoadUrl:function(){var a=h._createRecordLoadUrl.apply(this,arguments);a=this._addPagingInfoToUrl(a,this._currentPageNo);return a},_addRowToTable:function(a,b,c){if(c&&this.options.paging){this._reloadTable();return}h._addRowToTable.apply(this,arguments)},_addRow:function(a,b){if(b&&b.isNewRow&&this.options.paging){this._reloadTable();return}h._addRow.apply(this,arguments)},_removeRowsFromTable:function(a,b){h._removeRowsFromTable.apply(this,arguments);if(this.options.paging){if(this._$tableRows.length<=0&&this._currentPageNo>1){--this._currentPageNo}this._reloadTable()}},_onRecordsLoaded:function(a){if(this.options.paging){this._totalRecordCount=a.TotalRecordCount;this._createPagingList();this._createPagingInfo();this._refreshGotoPageInput()}h._onRecordsLoaded.apply(this,arguments)},_addPagingInfoToUrl:function(a,b){if(!this.options.paging){return a}var c=(b-1)*this.options.pageSize;var d=this.options.pageSize;return(a+(a.indexOf('?')<0?'?':'&')+'jtStartIndex='+c+'&jtPageSize='+d)},_createPagingList:function(){if(this.options.pageSize<=0){return}this._$pagingListArea.empty();if(this._totalRecordCount<=0){return}var a=this._calculatePageCount();this._createFirstAndPreviousPageButtons();if(this.options.pageList=='normal'){this._createPageNumberButtons(this._calculatePageNumbers(a))}this._createLastAndNextPageButtons(a);this._bindClickEventsToPageNumberButtons()},_createFirstAndPreviousPageButtons:function(){var a=$('<span></span>').addClass('jtable-page-number-first').html('&lt&lt').data('pageNumber',1).appendTo(this._$pagingListArea);var b=$('<span></span>').addClass('jtable-page-number-previous').html('&lt').data('pageNumber',this._currentPageNo-1).appendTo(this._$pagingListArea);if(this._currentPageNo<=1){a.addClass('jtable-page-number-disabled');b.addClass('jtable-page-number-disabled')}},_createLastAndNextPageButtons:function(a){var b=$('<span></span>').addClass('jtable-page-number-next').html('&gt').data('pageNumber',this._currentPageNo+1).appendTo(this._$pagingListArea);var c=$('<span></span>').addClass('jtable-page-number-last').html('&gt&gt').data('pageNumber',a).appendTo(this._$pagingListArea);if(this._currentPageNo>=a){b.addClass('jtable-page-number-disabled');c.addClass('jtable-page-number-disabled')}},_createPageNumberButtons:function(a){var b=0;for(var i=0;i<a.length;i++){if((a[i]-b)>1){$('<span></span>').addClass('jtable-page-number-space').html('...').appendTo(this._$pagingListArea)}this._createPageNumberButton(a[i]);b=a[i]}},_createPageNumberButton:function(a){var b=$('<span></span>').addClass('jtable-page-number').html(a).data('pageNumber',a).appendTo(this._$pagingListArea);if(this._currentPageNo==a){b.addClass('jtable-page-number-active jtable-page-number-disabled')}},_calculatePageCount:function(){var a=Math.floor(this._totalRecordCount/this.options.pageSize);if(this._totalRecordCount%this.options.pageSize!=0){++a}return a},_calculatePageNumbers:function(c){if(c<=4){var d=[];for(var i=1;i<=c;++i){d.push(i)}return d}else{var e=[1,2,c-1,c];var f=this._normalizeNumber(this._currentPageNo-1,1,c,1);var g=this._normalizeNumber(this._currentPageNo+1,1,c,1);this._insertToArrayIfDoesNotExists(e,f);this._insertToArrayIfDoesNotExists(e,this._currentPageNo);this._insertToArrayIfDoesNotExists(e,g);e.sort(function(a,b){return a-b});return e}},_createPagingInfo:function(){if(this._totalRecordCount<=0){this._$pageInfoSpan.empty();return}var a=(this._currentPageNo-1)*this.options.pageSize+1;var b=this._currentPageNo*this.options.pageSize;b=this._normalizeNumber(b,a,this._totalRecordCount,0);if(b>=a){var c=this._formatString(this.options.messages.pagingInfo,a,b,this._totalRecordCount);this._$pageInfoSpan.html(c)}},_bindClickEventsToPageNumberButtons:function(){var a=this;a._$pagingListArea.find('.jtable-page-number,.jtable-page-number-previous,.jtable-page-number-next,.jtable-page-number-first,.jtable-page-number-last').not('.jtable-page-number-disabled').click(function(e){e.preventDefault();a._changePage($(this).data('pageNumber'))})},_changePage:function(a){a=this._normalizeNumber(a,1,this._calculatePageCount(),1);if(a==this._currentPageNo){this._refreshGotoPageInput();return}this._currentPageNo=a;this._reloadTable()}})})(jQuery);(function($){var g={_initializeFields:$.hik.jtable.prototype._initializeFields,_normalizeFieldOptions:$.hik.jtable.prototype._normalizeFieldOptions,_createHeaderCellForField:$.hik.jtable.prototype._createHeaderCellForField,_createRecordLoadUrl:$.hik.jtable.prototype._createRecordLoadUrl};$.extend(true,$.hik.jtable.prototype,{options:{sorting:false,multiSorting:false,defaultSorting:''},_lastSorting:null,_initializeFields:function(){g._initializeFields.apply(this,arguments);this._lastSorting=[];if(this.options.sorting){this._buildDefaultSortingArray()}},_normalizeFieldOptions:function(a,b){g._normalizeFieldOptions.apply(this,arguments);b.sorting=(b.sorting!=false)},_createHeaderCellForField:function(a,b){var c=g._createHeaderCellForField.apply(this,arguments);if(this.options.sorting&&b.sorting){this._makeColumnSortable(c,a)}return c},_createRecordLoadUrl:function(){var a=g._createRecordLoadUrl.apply(this,arguments);a=this._addSortingInfoToUrl(a);return a},_buildDefaultSortingArray:function(){var f=this;$.each(f.options.defaultSorting.split(","),function(d,e){$.each(f.options.fields,function(a,b){if(b.sorting){var c=e.indexOf(a);if(c>-1){if(e.toUpperCase().indexOf(' DESC',c)>-1){f._lastSorting.push({fieldName:a,sortOrder:'DESC'})}else{f._lastSorting.push({fieldName:a,sortOrder:'ASC'})}}}})})},_makeColumnSortable:function(c,d){var f=this;c.addClass('jtable-column-header-sortable').click(function(e){e.preventDefault();if(!f.options.multiSorting||!e.ctrlKey){f._lastSorting=[]}f._sortTableByColumn(c)});$.each(this._lastSorting,function(a,b){if(b.fieldName==d){if(b.sortOrder=='DESC'){c.addClass('jtable-column-header-sorted-desc')}else{c.addClass('jtable-column-header-sorted-asc')}}})},_sortTableByColumn:function(a){if(this._lastSorting.length==0){a.siblings().removeClass('jtable-column-header-sorted-asc jtable-column-header-sorted-desc')}for(var i=0;i<this._lastSorting.length;i++){if(this._lastSorting[i].fieldName==a.data('fieldName')){this._lastSorting.splice(i--,1)}}if(a.hasClass('jtable-column-header-sorted-asc')){a.removeClass('jtable-column-header-sorted-asc').addClass('jtable-column-header-sorted-desc');this._lastSorting.push({'fieldName':a.data('fieldName'),sortOrder:'DESC'})}else{a.removeClass('jtable-column-header-sorted-desc').addClass('jtable-column-header-sorted-asc');this._lastSorting.push({'fieldName':a.data('fieldName'),sortOrder:'ASC'})}this._reloadTable()},_addSortingInfoToUrl:function(c){if(!this.options.sorting||this._lastSorting.length==0){return c}var d=[];$.each(this._lastSorting,function(a,b){d.push(b.fieldName+' '+b.sortOrder)});return(c+(c.indexOf('?')<0?'?':'&')+'jtSorting='+d.join(","))}})})(jQuery);(function($){var n={_create:$.hik.jtable.prototype._create,_normalizeFieldOptions:$.hik.jtable.prototype._normalizeFieldOptions,_createHeaderCellForField:$.hik.jtable.prototype._createHeaderCellForField,_createCellForRecordField:$.hik.jtable.prototype._createCellForRecordField};$.extend(true,$.hik.jtable.prototype,{options:{tableId:undefined,columnResizable:true,columnSelectable:true},_$columnSelectionDiv:null,_$columnResizeBar:null,_cookieKeyPrefix:null,_currentResizeArgs:null,_create:function(){n._create.apply(this,arguments);this._createColumnResizeBar();this._createColumnSelection();if(this.options.saveUserPreferences){this._loadColumnSettings()}this._normalizeColumnWidths()},_normalizeFieldOptions:function(a,b){n._normalizeFieldOptions.apply(this,arguments);if(this.options.columnResizable){b.columnResizable=(b.columnResizable!=false)}if(!b.visibility){b.visibility='visible'}},_createHeaderCellForField:function(a,b){var c=n._createHeaderCellForField.apply(this,arguments);if(this.options.columnResizable&&b.columnResizable&&(a!=this._columnList[this._columnList.length-1])){this._makeColumnResizable(c)}if(b.visibility=='hidden'){c.hide()}return c},_createCellForRecordField:function(a,b){var c=n._createCellForRecordField.apply(this,arguments);var d=this.options.fields[b];if(d.visibility=='hidden'){c.hide()}return c},changeColumnVisibility:function(a,b){this._changeColumnVisibilityInternal(a,b);this._normalizeColumnWidths();if(this.options.saveUserPreferences){this._saveColumnSettings()}},_changeColumnVisibilityInternal:function(a,b){var c=this._columnList.indexOf(a);if(c<0){this._logWarn('Column "'+a+'" does not exist in fields!');return}if(['visible','hidden','fixed'].indexOf(b)<0){this._logWarn('Visibility value is not valid: "'+b+'"! Options are: visible, hidden, fixed.');return}var d=this.options.fields[a];if(d.visibility==b){return}var e=this._firstDataColumnOffset+c+1;if(d.visibility!='hidden'&&b=='hidden'){this._$table.find('>thead >tr >th:nth-child('+e+'),>tbody >tr >td:nth-child('+e+')').hide()}else if(d.visibility=='hidden'&&b!='hidden'){this._$table.find('>thead >tr >th:nth-child('+e+'),>tbody >tr >td:nth-child('+e+')').show().css('display','table-cell')}d.visibility=b},_createColumnSelection:function(){var g=this;this._$columnSelectionDiv=$('<div />').addClass('jtable-column-selection-container').appendTo(g._$mainContainer);this._$table.children('thead').bind('contextmenu',function(e){if(!g.options.columnSelectable){return}e.preventDefault();$('<div />').addClass('jtable-contextmenu-overlay').click(function(){$(this).remove();g._$columnSelectionDiv.hide()}).bind('contextmenu',function(){return false}).appendTo(document.body);g._fillColumnSelection();var a=g._$mainContainer.offset();var b=e.pageY-a.top;var c=e.pageX-a.left;var d=100;var f=g._$mainContainer.width();if((f>d)&&(c>(f-d))){c=f-d}g._$columnSelectionDiv.css({left:c,top:b,'min-width':d+'px'}).show()})},_fillColumnSelection:function(){var d=this;var e=$('<ul></ul>').addClass('jtable-column-select-list');for(var i=0;i<this._columnList.length;i++){var f=this._columnList[i];var g=this.options.fields[f];var h=$('<li></li>').appendTo(e);var j=$('<label for="'+f+'"></label>').append($('<span>'+(g.title||f)+'</span>')).appendTo(h);var k=$('<input type="checkbox" name="'+f+'">').prependTo(j).click(function(){var a=$(this);var b=a.attr('name');var c=d.options.fields[b];if(c.visibility=='fixed'){return}d.changeColumnVisibility(b,a.is(':checked')?'visible':'hidden')});if(g.visibility!='hidden'){k.attr('checked','checked')}if(g.visibility=='fixed'){k.attr('disabled','disabled')}}this._$columnSelectionDiv.html(e)},_createColumnResizeBar:function(){this._$columnResizeBar=$('<div />').addClass('jtable-column-resize-bar').appendTo(this._$mainContainer).hide()},_makeColumnResizable:function(l){var m=this;$('<div />').addClass('jtable-column-resize-handler').appendTo(l.find('.jtable-column-header-container')).mousedown(function(f){f.preventDefault();f.stopPropagation();var g=m._$mainContainer.offset();var h=l.nextAll('th.jtable-column-header:visible:first');if(!h.length){return}var i=10;m._currentResizeArgs={currentColumnStartWidth:l.outerWidth(),minWidth:i,maxWidth:l.outerWidth()+h.outerWidth()-i,mouseStartX:f.pageX,minResizeX:function(){return this.mouseStartX-(this.currentColumnStartWidth-this.minWidth)},maxResizeX:function(){return this.mouseStartX+(this.maxWidth-this.currentColumnStartWidth)}};var j=function(a){if(!m._currentResizeArgs){return}var b=m._normalizeNumber(a.pageX,m._currentResizeArgs.minResizeX(),m._currentResizeArgs.maxResizeX());m._$columnResizeBar.css('left',(b-g.left)+'px')};var k=function(a){if(!m._currentResizeArgs){return}$(document).unbind('mousemove',j);$(document).unbind('mouseup',k);m._$columnResizeBar.hide();var b=a.pageX-m._currentResizeArgs.mouseStartX;var c=m._normalizeNumber(m._currentResizeArgs.currentColumnStartWidth+b,m._currentResizeArgs.minWidth,m._currentResizeArgs.maxWidth);var d=h.outerWidth()+(m._currentResizeArgs.currentColumnStartWidth-c);var e=l.data('width-in-percent')/m._currentResizeArgs.currentColumnStartWidth;l.data('width-in-percent',c*e);h.data('width-in-percent',d*e);l.css('width',l.data('width-in-percent')+'%');h.css('width',h.data('width-in-percent')+'%');m._normalizeColumnWidths();m._currentResizeArgs=null;if(m.options.saveUserPreferences){m._saveColumnSettings()}};m._$columnResizeBar.show().css({top:(l.offset().top-g.top)+'px',left:(f.pageX-g.left)+'px',height:(m._$table.outerHeight())+'px'});$(document).bind('mousemove',j);$(document).bind('mouseup',k)})},_normalizeColumnWidths:function(){var d=this._$table.find('>thead th.jtable-command-column-header').data('width-in-percent',1).css('width','1%');var e=this._$table.find('>thead th.jtable-column-header');var f=0;e.each(function(){var a=$(this);if(a.is(':visible')){f+=a.outerWidth()}});var g={};var h=100.0-d.length;e.each(function(){var a=$(this);if(a.is(':visible')){var b=a.data('fieldName');var c=a.outerWidth()*h/f;g[b]=c}});e.each(function(){var a=$(this);if(a.is(':visible')){var b=a.data('fieldName');a.data('width-in-percent',g[b]).css('width',g[b]+'%')}})},_saveColumnSettings:function(){var f=this;var g='';this._$table.find('>thead >tr >th.jtable-column-header').each(function(){var a=$(this);var b=a.data('fieldName');var c=a.data('width-in-percent');var d=f.options.fields[b].visibility;var e=b+"="+d+';'+c;g=g+e+'|'});this._setCookie('column-settings',g.substr(0,g.length-1))},_loadColumnSettings:function(){var f=this;var g=this._getCookie('column-settings');if(!g){return}var h={};$.each(g.split('|'),function(a,b){var c=b.split('=');var d=c[0];var e=c[1].split(';');h[d]={columnVisibility:e[0],columnWidth:e[1]}});var i=this._$table.find('>thead >tr >th.jtable-column-header');i.each(function(){var a=$(this);var b=a.data('fieldName');var c=f.options.fields[b];if(h[b]){if(c.visibility!='fixed'){f._changeColumnVisibilityInternal(b,h[b].columnVisibility)}a.data('width-in-percent',h[b].columnWidth).css('width',h[b].columnWidth+'%')}})}})})(jQuery);(function($){var g={_removeRowsFromTable:$.hik.jtable.prototype._removeRowsFromTable};$.extend(true,$.hik.jtable.prototype,{options:{openChildAsAccordion:false},openChildTable:function(c,d,e){var f=this;d.showCloseButton=(d.showCloseButton!=false);if(d.showCloseButton&&!d.closeRequested){d.closeRequested=function(){f.closeChildTable(c)}}if(f.options.openChildAsAccordion){c.siblings('.jtable-data-row').each(function(){f.closeChildTable($(this))})}f.closeChildTable(c,function(){var a=f.getChildRow(c).children('td').empty();var b=$('<div />').addClass('jtable-child-table-container').appendTo(a);a.data('childTable',b);b.jtable(d);f.openChildRow(c);b.hide().slideDown('fast',function(){if(e){e({childTable:b})}})})},closeChildTable:function(a,b){var c=this;var d=this.getChildRow(a).children('td');var e=d.data('childTable');if(!e){if(b){b()}return}d.data('childTable',null);e.slideUp('fast',function(){e.jtable('destroy');e.remove();c.closeChildRow(a);if(b){b()}})},isChildRowOpen:function(a){return(this.getChildRow(a).is(':visible'))},getChildRow:function(a){return a.data('childRow')||this._createChildRow(a)},openChildRow:function(a){var b=this.getChildRow(a);if(!b.is(':visible')){b.show()}return b},closeChildRow:function(a){var b=this.getChildRow(a);if(b.is(':visible')){b.hide()}},_removeRowsFromTable:function(c,d){if(d=='deleted'){c.each(function(){var a=$(this);var b=a.data('childRow');if(b){b.remove()}})}g._removeRowsFromTable.apply(this,arguments)},_createChildRow:function(a){var b=this._$table.find('thead th').length;var c=$('<tr></tr>').addClass('jtable-child-row').append('<td colspan="'+b+'"></td>');a.after(c);a.data('childRow',c);c.hide();return c}})})(jQuery);
